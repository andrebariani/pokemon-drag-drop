<div class="options">
    <button (click)="save()" [disabled]="pokemonBoard.length == 0" class="option">save</button>

    <mat-form-field class="option">
        <mat-label>Box Background</mat-label>
        <mat-select [(value)]="bgSelected">
            <mat-option value="forest">Forest</mat-option>
            <mat-option value="water">Water</mat-option>
        </mat-select>
    </mat-form-field>

    <div class="dragBox" cdkDrag>
        <div class="card">
            <div class="card-header">
                <span>PokéBox</span>
            </div>
        </div>
    </div>

    <div class="release" cdkDropList>

    </div>
</div>


<!-- <div class="layout-padding">
    <div [className]="'poke-board ' +  bgSelected" cdkDropList #pokeBoard="cdkDropList"
         [cdkDropListData]="pokemonBoard" [cdkDropListConnectedTo]="[pokeBoard]"
         (cdkDropListDropped)="drop($event)">
         <div cdkDrag *ngFor="let pokemon of pokemonBoard">
            <div class="card card-poke" *ngIf="!pokemon.children">
                <div class="card-header card-poke-header">
                    <img class="image"
                        src="assets/sprites/{{('000' + pokemon.content.id).substr(-3)}}MS.png">
                    <p class="name">{{pokemon.content.name.english}}</p>
                </div>
            </div>

            <div class="card card-box" *ngIf="pokemon.children">
                <div class="card-header">
                    <input matInput [(ngModel)]="pokemon.label" placeholder="New PokéBox" />
                </div>
                <div class="card-body" cdkDropList>
                </div>
            </div>
        </div>
    </div>
</div>

<div>
    <p>Welcome to the Pokemon Safari!</p>
    <button (click)="start()">Click me to start!</button>
    <button (click)="addPokemon()">Add Pokemon to board</button>
</div> -->

<div class="layout-padding">
    <div [className]="'poke-board ' +  bgSelected" cdkDropList #pokeBoard="cdkDropList"
         [cdkDropListData]="pokemonBoard" [cdkDropListConnectedTo]="[pokeBoard]"
         (cdkDropListDropped)="drop($event)">
        <ng-container *ngTemplateOutlet="recursiveList; context:{ $implicit: pokemonBoard }"></ng-container>
    </div>

    <ng-template #recursiveList let-list>

        <!-- <mat-card cdkDropList [cdkDropListEnterPredicate]="enter" (cdkDropListDropped)="drop()" #placeholder class="placeholder2">
        </mat-card> -->

        <div cdkDrag *ngFor="let pokemon of list">
            <div class="card card-poke" *ngIf="!pokemon.children">
                <div class="card-header card-poke-header">
                    <img class="image"
                        src="assets/sprites/{{('000' + pokemon.content.id).substr(-3)}}MS.png">
                    <p class="name">{{pokemon.content.name.english}}</p>
                </div>
            </div>

            <!-- <div class="card card-box" *ngIf="pokemon.children">
                <div class="card-header">
                    <input matInput [(ngModel)]="pokemon.label" placeholder="New PokéBox" />
                </div>
                <div class="card-body" cdkDropListGroup>
                    <ng-container *ngTemplateOutlet="recursiveList; context:{ $implicit: pokemon.children }">
                    </ng-container>
                </div>
            </div> -->
        </div>
    </ng-template>
</div>

<div>
    <p>Welcome to the Pokemon Safari!</p>
    <button (click)="start()">Click me to start!</button>
    <button (click)="addPokemon()">Add Pokemon to board</button>
</div>